{% set version = "6.5.20221214.1153" %}
{% set git_commit = "8bc35b98241102cf884316d076276d7951fd22a1" %}

package:
  name: mantid
  version: {{ version }}

source:
  url: https://github.com/mantidproject/mantid/archive/{{ git_commit }}.tar.gz
  sha256: d570c31cd5c29b709ae1f8081894c7a81f8202b1152f352d4b99ffe9b418c3d5

build:
  number: 0
  run_exports:
    - {{ pin_subpackage('mantid', max_pin='x.x.x') }}

requirements:
  build:
    - {{ compiler("c") }}
    - {{ compiler("cxx") }}
    - llvm-openmp  # [osx]
    - libgomp  # [linux]
    - ninja  # [unix]
    - cmake
    - git
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
  host:
    - boost {{ boost }}
    - eigen
    - gsl {{ gsl }}
    - h5py
    - hdf5 {{ hdf5 }}
    - jemalloc  # [unix]
    - jsoncpp
    - librdkafka
    - lib3mf  # [win]
    - muparser
    - nexus
    - numpy {{ numpy }}
    - occt {{ occt }}
    - python {{ python }}
    - poco
    - tbb-devel {{ tbb }}
    - zlib
    - pip
    - openssl {{ openssl }}
  run:
    - {{ pin_compatible("boost", max_pin="x.x") }}
    - {{ pin_compatible("gsl", max_pin="x.x") }}
    - h5py
    - {{ pin_compatible("hdf5", max_pin="x.x") }}
    - lib3mf  # [win]
    - nexus
    - {{ pin_compatible("numpy", upper_bound="1.23.*" }}
    - {{ pin_compatible("occt", max_pin="x.x.x") }}
    - python
    - python-dateutil
    - pyyaml
    - scipy
    - openssl {{ openssl }}
    - euphonic=0.6.*
    - toml

about:
  home: https://github.com/mantidproject/mantid
  license: GPL-3.0-or-later
  summary: Mantid provides a framework that supports high-performance computing and visualisation of materials science data.
  description: Mantid provides a framework that supports high-performance computing and visualisation of materials science data. To use the optional plotting sub package you must pip install matplotlib 3.1.3 to ensure correct compatibility.

extra:
  recipe-maintainers:
    - thomashampson
    - sf1919
    - martyngigg
