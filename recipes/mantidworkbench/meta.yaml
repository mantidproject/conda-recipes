{% set version = "6.5.20221220.1803" %}
{% set git_commit = "3b6faf2b55cb6d1c94c95d4f144822e3f0603d5a" %}

package:
  name: mantidworkbench
  version: {{ version }}

source:
  url: https://github.com/mantidproject/mantid/archive/{{ git_commit }}.tar.gz
  sha256: 76ee3e675e3aadb42abb4d4c758e4cbdb987fe845e2c6716082e43d19088d1e5

build:
  number: 0
  entry_points:
    - workbench = workbench.app.main:main
  osx_is_app: true
  ignore_run_exports_from:
      - {{ compiler('cxx') }}

requirements:
  build:
    - {{ compiler("cxx") }}
    - ninja  # [unix]
    - cmake
    - git
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
  host:
    - setuptools {{ setuptools }}
    - mantidqt {{ version }}
    - python
  run:
    - ipykernel {{ ipykernel }}
    - psutil
    - {{ pin_compatible("python", max_pin="x.x") }}
    - matplotlib {{ matplotlib }}
    - python.app  # [osx]
    - qtconsole
    - {{ pin_compatible("setuptools", max_pin="x.x") }}
    - mantiddocs {{ version }}

test:
  imports:
    - workbench

about:
  home: https://github.com/mantidproject/mantid
  license: GPL-3.0-or-later
  summary: MantidWorkbench provides a graphical user interface to the Mantid framework, supporting high-performance computing and visualisation of materials science data.

extra:
  recipe-maintainers:
    - thomashampson
    - sf1919
    - martyngigg
